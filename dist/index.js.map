{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 767d00d7344d6e8713f4","webpack:///./src/index.js","webpack:///./src/db/index.js","webpack:///./src/db/client.js","webpack:///external \"aws-sdk\"","webpack:///./src/db/team.js","webpack:///./src/db/user.js","webpack:///./~/node-uuid/uuid.js","webpack:///external \"crypto\"","webpack:///./src/db/bot.js","webpack:///./src/db/answer.js","webpack:///./src/db/token.js","webpack:///./src/botkit/index.js","webpack:///./src/botkit/storage.js"],"names":[],"mappings":"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K,MAAL;AACX,gBAAS,KAAK,IAAL;AACT,mBAAY,GAAZ;AACA,mBAAY,GAAZ;MANF;AAQA,mBAAc,SAAd;IA5BI,CAFyB;;AAiC/B,UAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,sBAAO,MAAP,CAAc,MAAd,EAAsB,UAAC,GAAD,EAAM,IAAN,EAAe;AACnC,WAAI,GAAJ,EAAS,OAAO,OAAO,GAAP,CAAP,CAAT;AACA,cAAO,oBAAO,IAAP,EAAa,KAAK,UAAL,CAApB,CAFmC;AAGnC,cAAO,QAAQ,IAAR,CAAP,CAHmC;MAAf,CAAtB,CADsC;IAArB,CAAnB,CAjC+B;;;;;;;AC5BjC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,QAAQ;AAClC,kCAAiC,iCAAiC;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C;AAC7C;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB,SAAS;AAC1B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uCAAsC,EAAE;AACxC,qBAAoB;AACpB;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;A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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"aws-sdk\"), (function webpackLoadOptionalExternalModule() { try { return require(\"crypto\"); } catch(e) {} }()));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"aws-sdk\", \"crypto\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"luno\"] = factory(require(\"aws-sdk\"), (function webpackLoadOptionalExternalModule() { try { return require(\"crypto\"); } catch(e) {} }()));\n\telse\n\t\troot[\"luno\"] = factory(root[\"aws-sdk\"], root[\"crypto\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_7__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 767d00d7344d6e8713f4\n **/","export * as db from './db';\nexport * as botkit from './botkit';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","export * as client from './client';\nexport * as team from './team';\nexport * as user from './user';\nexport * as bot from './bot';\nexport * as answer from './answer';\nexport * as token from './token';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/db/index.js\n **/","/**\n * Return a table name for the model based on env variables.\n *\n * @param {String} model model name\n * @return {String} resolved table name\n */\nexport function resolveTableName(model) {\n  const { env: { STAGE } } = process;\n  return `${STAGE}-${model}`;\n}\n\n/**\n * Return a model type with the values from the db.\n *\n * @param {Type} Model type of model\n * @param {Object} data data to copy to the model\n * @return {Object} returns the inflated model\n */\nexport function fromDB(Model, data) {\n  const model = new Model();\n  return Object.assign(model, data);\n}\n\n/**\n * Helper for returning a composite key in our standard format.\n *\n * @param {Array[String]} parts composite id parts\n * @return {String} returns the composite id\n */\nexport function compositeId(...parts) {\n  return parts.join('_');\n}\n\n/**\n * Helper for deconstructing a composite key in our standard foramt.\n *\n * @param {String} id composite id\n * @return {Array[String]} composite id parts\n */\nexport function deconstructId(id) {\n  return id.split('_');\n}\n\nexport default (() => {\n  const AWS = require('aws-sdk');\n  const DocumentClient = AWS.DynamoDB.DocumentClient;\n  return new DocumentClient();\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/db/client.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"aws-sdk\"\n ** module id = 3\n ** module chunks = 0\n **/","import client, { fromDB, resolveTableName } from './client';\n\nconst table = resolveTableName('team-v1');\n\nexport class Team {};\n\nexport function getTeam(id) {\n  const params = {\n    TableName: table,\n    Key: { id },\n  };\n\n  return new Promise((resolve, reject) => {\n    client.get(params, (err, data) => {\n      if (err) return reject(err);\n\n      let team;\n      if (data.Item) {\n        team = fromDB(Team, data.Item);\n      }\n\n      return resolve(team);\n    });\n  });\n}\n\nexport function updateTeam(team) {\n\n  // normalize to camel case\n  team.bot.userId = team.bot.user_id;\n  delete team.bot.user_id;\n\n  const now = new Date().toISOString();\n  const params = {\n    TableName: table,\n    Key: { id: team.id },\n    UpdateExpression: `\n      SET\n        #createdBy = if_not_exists(createdBy, :createdBy),\n        #name = :name,\n        #slack = :slack,\n        #created = if_not_exists(#created, :created),\n        #changed = :changed\n    `,\n    ExpressionAttributeNames: {\n      '#createdBy': 'createdBy',\n      '#name': 'name',\n      '#slack': 'slack',\n      '#created': 'created',\n      '#changed': 'changed',\n    },\n    ExpressionAttributeValues: {\n      ':createdBy': team.createdBy,\n      ':name': team.name,\n      ':slack': {\n        bot: team.bot,\n        url: team.url,\n        token: team.token,\n      },\n      ':created': now,\n      ':changed': now,\n    },\n    ReturnValues: 'ALL_NEW',\n  };\n\n  return new Promise((resolve, reject) => {\n    client.update(params, (err, data) => {\n      if (err) return reject(err);\n      const team = fromDB(Team, data.Attributes);\n      return resolve(team);\n    });\n  });\n}\n\nexport function getTeams() {\n  const params = {\n    TableName: table,\n  };\n  return new Promise((resolve, reject) => {\n    client.query(params, (err, data) => {\n      if (err) return reject(err);\n      return resolve(data.Items.map((item) => fromDB(Team, item)));\n    });\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/db/team.js\n **/","import uuid from 'node-uuid';\n\nimport client, { fromDB, resolveTableName } from './client';\n\nconst table = resolveTableName('user-v1');\n\nexport class User {};\n\nexport function getUser(id) {\n  return new Promise((resolve, reject) => {\n    const params = {\n      TableName: table,\n      Key: { id },\n    };\n\n    client.get(params, (err, data) => {\n      if (err) return reject(err);\n\n      let user;\n      if (data.Item) {\n        user = fromDB(User, data.Item);\n      }\n\n      return resolve(user);\n    });\n  });\n}\n\nexport function updateUser(user) {\n  const now = new Date().toISOString();\n  const params = {\n    TableName: table,\n    Key: { id: user.id },\n    UpdateExpression:`\n      SET\n        #accessToken = :accessToken,\n        #scopes = :scopes,\n        #teamId = :teamId,\n        #user = :user,\n        #created = if_not_exists(#created, :created),\n        #changed = :changed\n    `,\n    ExpressionAttributeNames: {\n      '#accessToken': 'accessToken',\n      '#scopes': 'scopes',\n      '#teamId': 'teamId',\n      '#user': 'user',\n      '#created': 'created',\n      '#changed': 'changed',\n    },\n    ExpressionAttributeValues: {\n      ':accessToken': user.accessToken,\n      ':scopes': user.scopes,\n      ':teamId': user.teamId,\n      ':user': user.user,\n      ':created': now,\n      ':changed': now,\n    },\n    ReturnValues: 'ALL_NEW',\n  };\n\n  return new Promise((resolve, reject) => {\n    client.update(params, (err, data) => {\n      if (err) return reject(err);\n      user = fromDB(User, data.Attributes);\n      return resolve(user);\n    });\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/db/user.js\n **/","//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n/*global window, require, define */\n(function(_window) {\n  'use strict';\n\n  // Unique ID creation requires a high quality random # generator.  We feature\n  // detect to determine the best RNG source, normalizing to a function that\n  // returns 128-bits of randomness, since that's what's usually required\n  var _rng, _mathRNG, _nodeRNG, _whatwgRNG, _previousRoot;\n\n  function setupBrowser() {\n    // Allow for MSIE11 msCrypto\n    var _crypto = _window.crypto || _window.msCrypto;\n\n    if (!_rng && _crypto && _crypto.getRandomValues) {\n      // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n      //\n      // Moderately fast, high quality\n      try {\n        var _rnds8 = new Uint8Array(16);\n        _whatwgRNG = _rng = function whatwgRNG() {\n          _crypto.getRandomValues(_rnds8);\n          return _rnds8;\n        };\n        _rng();\n      } catch(e) {}\n    }\n\n    if (!_rng) {\n      // Math.random()-based (RNG)\n      //\n      // If all else fails, use Math.random().  It's fast, but is of unspecified\n      // quality.\n      var  _rnds = new Array(16);\n      _mathRNG = _rng = function() {\n        for (var i = 0, r; i < 16; i++) {\n          if ((i & 0x03) === 0) { r = Math.random() * 0x100000000; }\n          _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n        }\n\n        return _rnds;\n      };\n      if ('undefined' !== typeof console && console.warn) {\n        console.warn(\"[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()\");\n      }\n    }\n  }\n\n  function setupNode() {\n    // Node.js crypto-based RNG - http://nodejs.org/docs/v0.6.2/api/crypto.html\n    //\n    // Moderately fast, high quality\n    if ('function' === typeof require) {\n      try {\n        var _rb = require('crypto').randomBytes;\n        _nodeRNG = _rng = _rb && function() {return _rb(16);};\n        _rng();\n      } catch(e) {}\n    }\n  }\n\n  if (_window) {\n    setupBrowser();\n  } else {\n    setupNode();\n  }\n\n  // Buffer class to use\n  var BufferClass = ('function' === typeof Buffer) ? Buffer : Array;\n\n  // Maps for number <-> hex string conversion\n  var _byteToHex = [];\n  var _hexToByte = {};\n  for (var i = 0; i < 256; i++) {\n    _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n    _hexToByte[_byteToHex[i]] = i;\n  }\n\n  // **`parse()` - Parse a UUID into it's component bytes**\n  function parse(s, buf, offset) {\n    var i = (buf && offset) || 0, ii = 0;\n\n    buf = buf || [];\n    s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n      if (ii < 16) { // Don't overflow!\n        buf[i + ii++] = _hexToByte[oct];\n      }\n    });\n\n    // Zero out remaining bytes if string was short\n    while (ii < 16) {\n      buf[i + ii++] = 0;\n    }\n\n    return buf;\n  }\n\n  // **`unparse()` - Convert UUID byte array (ala parse()) into a string**\n  function unparse(buf, offset) {\n    var i = offset || 0, bth = _byteToHex;\n    return  bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]];\n  }\n\n  // **`v1()` - Generate time-based UUID**\n  //\n  // Inspired by https://github.com/LiosK/UUID.js\n  // and http://docs.python.org/library/uuid.html\n\n  // random #'s we need to init node and clockseq\n  var _seedBytes = _rng();\n\n  // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n  var _nodeId = [\n    _seedBytes[0] | 0x01,\n    _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n  ];\n\n  // Per 4.2.2, randomize (14 bit) clockseq\n  var _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n  // Previous uuid creation time\n  var _lastMSecs = 0, _lastNSecs = 0;\n\n  // See https://github.com/broofa/node-uuid for API details\n  function v1(options, buf, offset) {\n    var i = buf && offset || 0;\n    var b = buf || [];\n\n    options = options || {};\n\n    var clockseq = (options.clockseq != null) ? options.clockseq : _clockseq;\n\n    // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n    // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n    // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n    // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n    var msecs = (options.msecs != null) ? options.msecs : new Date().getTime();\n\n    // Per 4.2.1.2, use count of uuid's generated during the current clock\n    // cycle to simulate higher resolution clock\n    var nsecs = (options.nsecs != null) ? options.nsecs : _lastNSecs + 1;\n\n    // Time since last uuid creation (in msecs)\n    var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n    // Per 4.2.1.2, Bump clockseq on clock regression\n    if (dt < 0 && options.clockseq == null) {\n      clockseq = clockseq + 1 & 0x3fff;\n    }\n\n    // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n    // time interval\n    if ((dt < 0 || msecs > _lastMSecs) && options.nsecs == null) {\n      nsecs = 0;\n    }\n\n    // Per 4.2.1.2 Throw error if too many uuids are requested\n    if (nsecs >= 10000) {\n      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n    }\n\n    _lastMSecs = msecs;\n    _lastNSecs = nsecs;\n    _clockseq = clockseq;\n\n    // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n    msecs += 12219292800000;\n\n    // `time_low`\n    var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n    b[i++] = tl >>> 24 & 0xff;\n    b[i++] = tl >>> 16 & 0xff;\n    b[i++] = tl >>> 8 & 0xff;\n    b[i++] = tl & 0xff;\n\n    // `time_mid`\n    var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n    b[i++] = tmh >>> 8 & 0xff;\n    b[i++] = tmh & 0xff;\n\n    // `time_high_and_version`\n    b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n    b[i++] = tmh >>> 16 & 0xff;\n\n    // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n    b[i++] = clockseq >>> 8 | 0x80;\n\n    // `clock_seq_low`\n    b[i++] = clockseq & 0xff;\n\n    // `node`\n    var node = options.node || _nodeId;\n    for (var n = 0; n < 6; n++) {\n      b[i + n] = node[n];\n    }\n\n    return buf ? buf : unparse(b);\n  }\n\n  // **`v4()` - Generate random UUID**\n\n  // See https://github.com/broofa/node-uuid for API details\n  function v4(options, buf, offset) {\n    // Deprecated - 'format' argument, as supported in v1.2\n    var i = buf && offset || 0;\n\n    if (typeof(options) === 'string') {\n      buf = (options === 'binary') ? new BufferClass(16) : null;\n      options = null;\n    }\n    options = options || {};\n\n    var rnds = options.random || (options.rng || _rng)();\n\n    // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n    // Copy bytes to buffer, if provided\n    if (buf) {\n      for (var ii = 0; ii < 16; ii++) {\n        buf[i + ii] = rnds[ii];\n      }\n    }\n\n    return buf || unparse(rnds);\n  }\n\n  // Export public API\n  var uuid = v4;\n  uuid.v1 = v1;\n  uuid.v4 = v4;\n  uuid.parse = parse;\n  uuid.unparse = unparse;\n  uuid.BufferClass = BufferClass;\n  uuid._rng = _rng;\n  uuid._mathRNG = _mathRNG;\n  uuid._nodeRNG = _nodeRNG;\n  uuid._whatwgRNG = _whatwgRNG;\n\n  if (('undefined' !== typeof module) && module.exports) {\n    // Publish as node.js module\n    module.exports = uuid;\n  } else if (typeof define === 'function' && define.amd) {\n    // Publish as AMD module\n    define(function() {return uuid;});\n\n\n  } else {\n    // Publish as global (in browsers)\n    _previousRoot = _window.uuid;\n\n    // **`noConflict()` - (browser only) to reset global 'uuid' var**\n    uuid.noConflict = function() {\n      _window.uuid = _previousRoot;\n      return uuid;\n    };\n\n    _window.uuid = uuid;\n  }\n})('undefined' !== typeof window ? window : null);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/node-uuid/uuid.js\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"crypto\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"crypto\"\n ** module id = 7\n ** module chunks = 0\n **/","import uuid from 'node-uuid';\n\nimport client, { fromDB, resolveTableName } from './client';\n\nconst table = resolveTableName('bot-v1');\n\nexport class Bot {};\n\nexport function createBot(data) {\n  const bot = new Bot();\n  const now = new Date().toISOString();\n\n  Object.assign(bot, data);\n  bot.id = uuid.v4();\n  bot.created = now;\n  bot.changed = now;\n\n  const params = {\n    TableName: table,\n    Item: bot,\n  };\n  return new Promise((resolve, reject) => {\n    client.put(params, (err, data) => {\n      if (err) return reject(err);\n      return resolve(bot);\n    });\n  });\n}\n\nexport function getBot(teamId, id) {\n  return new Promise((resolve, reject) => {\n    const params = {\n      TableName: table,\n      Key: { teamId, id },\n    };\n\n    client.get(params, (err, data) => {\n      if (err) return reject(err);\n      const bot = fromDB(Bot, data.Item);\n      return resolve(bot);\n    });\n  });\n}\n\nexport function getBots(teamId) {\n  return new Promise((resolve, reject) => {\n    const params = {\n      TableName: table,\n      KeyConditionExpression: 'teamId = :teamId',\n      ExpressionAttributeValues: {\n        ':teamId': teamId,\n      },\n    };\n\n    client.query(params, (err, data) => {\n      if (err) return reject(err);\n      return resolve(data.Items.map((item) => fromDB(Bot, item)));\n    });\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/db/bot.js\n **/","import uuid from 'node-uuid';\n\nimport client, { compositeId, fromDB, resolveTableName } from './client';\n\nconst table = resolveTableName('answer-v1');\n\nexport class Answer {};\n\nexport function createAnswer({ botId, ...data }) {\n  const answer = new Answer();\n  Object.assign(answer, data);\n  answer.id = uuid.v4();\n  answer.botId = botId;\n\n  const now = new Date().toISOString();\n  answer.created = now;\n  answer.changed = now;\n\n  const params = {\n    TableName: table,\n    Item: answer,\n  };\n\n  return new Promise((resolve, reject) => {\n    client.put(params, (err, data) => {\n      if (err) return reject(err);\n      return resolve(answer);\n    });\n  });\n}\n\nexport function getAnswer(botId, id) {\n  const params = {\n    TableName: table,\n    Key: { id, botId },\n  };\n\n  return new Promise((resolve, reject) => {\n    client.get(params, (err, data) => {\n      if (err) return reject(err);\n\n      let answer;\n      if (data.Item) {\n        answer = fromDB(Answer, data.Item);\n      }\n\n      return resolve(answer);\n    });\n  });\n}\n\nexport function getAnswers(botId) {\n  const params = {\n    TableName: table,\n    KeyConditionExpression: 'botId = :botId',\n    ExpressionAttributeValues: {\n      ':botId': botId,\n    },\n  };\n\n  return new Promise((resolve, reject) => {\n    client.query(params, (err, data) => {\n      if (err) return reject(err);\n      return resolve(data.Items.map((item) => fromDB(Answer, item)));\n    });\n  });\n}\n\nexport function deleteAnswer(botId, id) {\n  const params = {\n    TableName: table,\n    Key: { id, botId },\n    ReturnValues: 'ALL_OLD',\n  };\n\n  return new Promise((resolve, reject) => {\n    client.delete(params, (err, data) => {\n      if (err) return reject(err);\n      return resolve(fromDB(Answer, data.Attributes));\n    });\n  });\n}\n\nexport function updateAnswer({ botId, id, title, body }) {\n  const params = {\n    TableName: table,\n    Key: { id, botId },\n    UpdateExpression:`\n      SET\n        #title = :title,\n        #body = :body,\n        #changed = :changed\n    `,\n    ExpressionAttributeNames: {\n      '#title': 'title',\n      '#body': 'body',\n      '#changed': 'changed',\n    },\n    ExpressionAttributeValues: {\n      ':title': title,\n      ':body': body,\n      ':changed': new Date().toISOString(),\n    },\n    ReturnValues: 'ALL_NEW',\n  };\n\n  return new Promise((resolve, reject) => {\n    client.update(params, (err, data) => {\n      if (err) return reject(err);\n      return resolve(fromDB(Answer, data.Attributes));\n    });\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/db/answer.js\n **/","import uuid from 'node-uuid';\n\nimport client, { fromDB, resolveTableName } from './client';\n\nconst table = resolveTableName('token-v1');\n\nexport class Token {};\n\nexport function getToken(userId, id) {\n  const params = {\n    TableName: table,\n    Key: { id, userId: userId },\n  };\n\n  return new Promise((resolve, reject) => {\n    client.get(params, (err, data) => {\n      if (err) return reject(err);\n\n      let token;\n      if (data.Item) {\n        token = fromDB(Token, data.Item);\n      }\n\n      return resolve(token);\n    });\n  });\n}\n\nexport function createToken({ userId, ...data }) {\n  const token = new Token();\n  const now = new Date().toISOString();\n  Object.assign(token, data);\n  token.id = uuid.v4();\n  token.userId = userId;\n  token.active = true;\n  token.created = now;\n  token.changed = now;\n\n  const params = {\n    TableName: table,\n    Item: token,\n  };\n\n  return new Promise((resolve, reject) => {\n    client.put(params, (err, data) => {\n      if (err) return reject(err);\n      return resolve(token);\n    });\n  });\n}\n\nexport function deleteToken(id, userId) {\n  const params = {\n    TableName: table,\n    Key: { id, userId },\n  };\n\n  return new Promise((resolve, reject) => {\n    client.delete(params, (err, data) => {\n      if (err) return reject(err);\n      return resolve();\n    });\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/db/token.js\n **/","export { default as storage } from './storage';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/botkit/index.js\n **/","import { getTeam, updateTeam, getTeams } from '../db/team';\nimport { getUser, updateUser } from '../db/user';\nimport { createBot } from '../db/bot';\n\nexport default {\n  teams: {\n    get: async (id, cb) => {\n      let team;\n      try {\n        team = await getTeam(id);\n      } catch (err) {\n        return cb(err);\n      }\n\n      return cb(null, team);\n    },\n\n    save: async ({ team: data, isnew }, cb) => {\n      let team;\n      try {\n        team = await updateTeam(data);\n      } catch (err) {\n        return cb(err);\n      }\n\n      if (isnew) {\n        try {\n          await createBot({ teamId: team.id });\n        } catch (err) {\n          return cb(err);\n        }\n      }\n\n      return cb(null, team);\n    },\n\n    all: async (cb) => {\n      let teams;\n      try {\n        teams = await getTeams();\n      } catch (err) {\n        return cb(err);\n      }\n\n      return cb(null, teams);\n    },\n\n  },\n  users: {\n    get: async (id, cb) => {\n      let user;\n      try {\n        user = await getUser(id);\n      } catch (err) {\n        return cb(err);\n      }\n\n      return cb(null, user);\n    },\n\n    save: async ({ user: data, isnew }, cb) => {\n      // transform values from slack to camelcase\n      if (data.access_token) {\n        data.accessToken = data.access_token;\n        delete data.access_token;\n      }\n\n      if (data.team_id) {\n        data.teamId = data.team_id;\n        delete data.team_id;\n      }\n\n      let user;\n      try {\n        user = await updateUser(data);\n      } catch (err) {\n        return cb(err);\n      }\n\n      return cb(null, user);\n    },\n\n    // We should never want to return all the users in the system\n    all: (cb) => cb(new Error('Not implemented')),\n  },\n  channels: {\n    get: (_, cb) => cb(new Error('Not implemented')),\n    save: (_, cb) => cb(new Error('Not implemented')),\n    all: (cb) => cb(new Error('Not implemented')),\n  },\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/botkit/storage.js\n **/"],"sourceRoot":""}